<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pure CSS/JS Flipbook (Single File)</title>
<style>
  :root { --w: 600px; --h: 400px; --gutter: 12px; }
  * { box-sizing: border-box; }
  body {
    margin: 0; min-height: 100vh; display: grid; place-items: center;
    background: #eceff1; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  .wrap { display: grid; gap: 10px; }
  .book {
    position: relative;
    width: var(--w); height: var(--h);
    perspective: 2000px;
    filter: drop-shadow(0 30px 30px rgba(0,0,0,.18));
    background: linear-gradient(90deg,#f8f8f8,#fff 20%,#fff 80%,#f8f8f8);
    border-radius: 6px;
  }
  /* The spine */
  .spine {
    position: absolute; inset: 0; pointer-events: none;
    background: linear-gradient(90deg, transparent 49.5%, rgba(0,0,0,.06) 50%, transparent 50.5%);
    border-radius: 6px;
  }
  /* Page stack container */
  .pages {
    position: absolute; inset: 0; display: grid; grid-template-columns: 1fr 1fr;
    overflow: hidden; border-radius: 6px;
  }
  /* Left & right static sheets (for content already flipped) */
  .leaf { position: relative; overflow: hidden; }
  .leaf.left  { background: #fafafa; }
  .leaf.right { background: #fff; }

  /* Every page "sheet" you can flip */
  .sheet {
    position: absolute; top: 0; bottom: 0; left: 50%; width: 50%;
    transform-origin: left;
    transform-style: preserve-3d;
    transition: transform .8s cubic-bezier(.2,.6,.2,1);
    pointer-events: none; /* becomes clickable via .active */
  }
  .sheet .face {
    position: absolute; inset: 0; backface-visibility: hidden;
    background: #fff; border-left: 1px solid rgba(0,0,0,.08);
    display: grid; place-items: center; padding: 24px; text-align: center;
  }
  .sheet .back {
    transform: rotateY(180deg);
    background: #fafafa;
  }

  /* Stacking order so later sheets sit on top initially */
  .sheet { z-index: 10; }
  .sheet[data-idx="1"] { z-index: 110; }
  .sheet[data-idx="2"] { z-index: 109; }
  .sheet[data-idx="3"] { z-index: 108; }
  .sheet[data-idx="4"] { z-index: 107; }
  .sheet[data-idx="5"] { z-index: 106; }
  .sheet[data-idx="6"] { z-index: 105; }
  .sheet[data-idx="7"] { z-index: 104; }
  .sheet[data-idx="8"] { z-index: 103; }
  .sheet[data-idx="9"] { z-index: 102; }
  .sheet[data-idx="10"]{ z-index: 101; }

  /* Flipped state */
  .sheet.flipped { transform: translateX(-100%) rotateY(-180deg); }
  .sheet.active  { pointer-events: auto; cursor: ew-resize; }

  /* Page numbers */
  .num { position: absolute; bottom: 8px; right: 12px; font-size: 12px; color: #666; }

  /* Controls */
  .controls {
    display: flex; gap: 8px; justify-content: center; align-items: center;
  }
  .btn {
    border: 1px solid #c7c7c7; background: #fff; padding: 8px 14px; border-radius: 6px;
    cursor: pointer; font-weight: 600; letter-spacing: .2px;
    box-shadow: 0 2px 6px rgba(0,0,0,.05);
  }
  .btn:disabled { opacity: .45; cursor: not-allowed; }
  .status { min-width: 120px; text-align: center; font-size: 14px; color: #333; }

  /* Click zones to flip by clicking page edges */
  .zone {
    position: absolute; top: 0; bottom: 0; width: 18%;
    z-index: 999; /* Above sheets so it’s always clickable */
  }
  .zone.left  { left: 0; }
  .zone.right { right: 0; }
  .zone:active { background: rgba(0,0,0,.03); }

  /* Responsive */
  @media (max-width: 680px) {
    :root { --w: 92vw; --h: 62vw; }
  }

  /* Demo content styles (optional) */
  .face h1 { margin: 0 0 10px; font-size: 28px; }
  .face p  { margin: 0; line-height: 1.4; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="book" id="book">
      <div class="spine"></div>
      <div class="pages">
        <div class="leaf left"  id="leftLeaf"></div>
        <div class="leaf right" id="rightLeaf"></div>

        <!-- Sheets (each has a FRONT on the right, BACK on the left after flip) -->
        <!-- Add or remove sheets freely. Update data-idx sequentially for z-index order. -->
        <div class="sheet" data-idx="1">
          <div class="face front">
            <h1>Cover</h1>
            <p>Click the right edge →</p>
            <div class="num">1</div>
          </div>
          <div class="face back">
            <h1>Page 2</h1>
            <p>Back of sheet 1</p>
            <div class="num">2</div>
          </div>
        </div>

        <div class="sheet" data-idx="2">
          <div class="face front">
            <h1>Page 3</h1>
            <p>Front of sheet 2</p>
            <div class="num">3</div>
          </div>
          <div class="face back">
            <h1>Page 4</h1>
            <p>Back of sheet 2</p>
            <div class="num">4</div>
          </div>
        </div>

        <div class="sheet" data-idx="3">
          <div class="face front">
            <h1>Page 5</h1>
            <p>Front of sheet 3</p>
            <div class="num">5</div>
          </div>
          <div class="face back">
            <h1>Page 6</h1>
            <p>Back of sheet 3</p>
            <div class="num">6</div>
          </div>
        </div>

        <div class="sheet" data-idx="4">
          <div class="face front">
            <h1>Page 7</h1>
            <p>Front of sheet 4</p>
            <div class="num">7</div>
          </div>
          <div class="face back">
            <h1>Page 8</h1>
            <p>Back of sheet 4</p>
            <div class="num">8</div>
          </div>
        </div>

        <div class="sheet" data-idx="5">
          <div class="face front">
            <h1>Page 9</h1>
            <p>Front of sheet 5</p>
            <div class="num">9</div>
          </div>
          <div class="face back">
            <h1>Back Cover</h1>
            <p>Thanks for reading!</p>
            <div class="num">10</div>
          </div>
        </div>
      </div>

      <!-- Click zones -->
      <div class="zone left"  id="zoneLeft"  aria-label="Previous page"></div>
      <div class="zone right" id="zoneRight" aria-label="Next page"></div>
    </div>

    <div class="controls">
      <button class="btn" id="prevBtn">← Prev</button>
      <div class="status" id="status">1 / 10</div>
      <button class="btn" id="nextBtn">Next →</button>
    </div>
  </div>

<script>
(function () {
  const sheets = Array.from(document.querySelectorAll('.sheet'));
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  const zoneLeft = document.getElementById('zoneLeft');
  const zoneRight = document.getElementById('zoneRight');
  const status = document.getElementById('status');

  // Current "spread" position measured by how many fronts have been turned.
  let turned = 0; // 0 = cover closed, max = sheets.length
  const totalPages = sheets.length * 2;

  function updateActive() {
    // Mark the next sheet to flip as active (clickable), and the previous flipped one too (for going back)
    sheets.forEach(s => s.classList.remove('active'));
    if (turned < sheets.length) sheets[turned].classList.add('active');           // next forward
    if (turned > 0)               sheets[turned - 1].classList.add('active');     // next backward
  }

  function updateStatus() {
    const currentPage = Math.min(turned * 2 + 1, totalPages);
    status.textContent = `${currentPage} / ${totalPages}`;
    prevBtn.disabled = (turned === 0);
    nextBtn.disabled = (turned === sheets.length);
  }

  function forward() {
    if (turned >= sheets.length) return;
    const s = sheets[turned];
    s.classList.add('flipped');
    turned += 1;
    updateActive();
    updateStatus();
  }

  function backward() {
    if (turned <= 0) return;
    const s = sheets[turned - 1];
    s.classList.remove('flipped');
    turned -= 1;
    updateActive();
    updateStatus();
  }

  // Click zones & buttons
  zoneRight.addEventListener('click', forward);
  zoneLeft .addEventListener('click', backward);
  nextBtn.addEventListener('click', forward);
  prevBtn.addEventListener('click', backward);

  // Keyboard arrows
  window.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') forward();
    if (e.key === 'ArrowLeft')  backward();
  });

  // Simple drag-to-flip on active sheet (desktop + touch)
  let dragging = null;
  function startDrag(e, sheet, dir) {
    dragging = { sheet, dir };
    e.preventDefault();
  }
  function moveDrag(e) {
    if (!dragging) return;
    const x = (e.touches ? e.touches[0].clientX : e.clientX);
    const rect = dragging.sheet.getBoundingClientRect();
    const rel = (x - rect.left) / rect.width; // 0..1
    const angle = Math.max(0, Math.min(180, (dragging.dir === 'forward' ? rel : 1 - rel) * 180));
    dragging.sheet.style.transition = 'none';
    dragging.sheet.style.transform = dragging.dir === 'forward'
      ? `translateX(-${angle/1.8}%) rotateY(-${angle}deg)`
      : `translateX(-${(180-angle)/1.8}%) rotateY(-${180-angle}deg)`;
  }
  function endDrag() {
    if (!dragging) return;
    dragging.sheet.style.transition = '';
    // Commit based on final transform angle
    const isGoingForward = dragging.dir === 'forward';
    if (isGoingForward) {
      dragging.sheet.classList.add('flipped'); turned = Math.max(turned, sheets.indexOf(dragging.sheet) + 1);
    } else {
      dragging.sheet.classList.remove('flipped'); turned = Math.min(turned, sheets.indexOf(dragging.sheet));
    }
    dragging = null;
    updateActive(); updateStatus();
  }

  // Enable drag on the currently active forward/backward sheet faces
  function bindDrag() {
    sheets.forEach((sheet, i) => {
      // Forward drag from the right page
      sheet.addEventListener('mousedown', (e) => { if (i === turned) startDrag(e, sheet, 'forward'); });
      sheet.addEventListener('touchstart', (e) => { if (i === turned) startDrag(e, sheet, 'forward'); }, {passive:false});
      // Backward drag from the already-flipped page
      sheet.addEventListener('mousedown', (e) => { if (i === turned-1) startDrag(e, sheet, 'backward'); });
      sheet.addEventListener('touchstart', (e) => { if (i === turned-1) startDrag(e, sheet, 'backward'); }, {passive:false});
    });
    window.addEventListener('mousemove', moveDrag);
    window.addEventListener('touchmove', moveDrag, {passive:false});
    window.addEventListener('mouseup', endDrag);
    window.addEventListener('touchend', endDrag);
    window.addEventListener('touchcancel', endDrag);
  }

  // Init
  updateActive();
  updateStatus();
  bindDrag();
})();
</script>
</body>
</html>
